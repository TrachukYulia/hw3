name: Lint Code Base
on:
  # Триггер на push любого коммита в ветку
  push:
      branches: [ "master" ]
# Задачи к выполнению
# I just want to lint, so I will create a "lint" stage
jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
# Lets name our Job eslint, because that's what it's doing.
    - name: eslint
 # tell eslint what stage it is. (This could also be build or test for example)
 # What scripts do we want to run?    
    # install eslint
      run: npm i eslint
    # Run eslin
    - name: runner
      run: node_modules/eslint/bin/eslint.js 
  build:
    needs: lint
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Build image
        run: docker build -t ${{secrets.DOCKER_HUB_USERNAME}}/devops-nodejs-app:latest .
